import{j as e,m as G}from"./ui-BCLI9ZVX.js";import{a as de,r as h,R as se}from"./vendor-DJ1oPbzn.js";import{M as J,r as q}from"./markdown-pkb9tii-.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const c of g.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function o(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function u(d){if(d.ep)return;d.ep=!0;const g=o(d);fetch(d.href,g)}})();var re,Z=de;re=Z.createRoot,Z.hydrateRoot;const ce="/apcontract",Y=async(i,p="",o=!0,u)=>{console.log("chatWithDraftAgent",{session_id:i,query:p,is_interrupt:o,idea_structuring:u}),await new Promise(d=>setTimeout(d,1e3));try{const d=await fetch(`${ce}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:i,query:p,is_interrupt:o,idea_structuring:u})});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const g=d.body.getReader(),c=new TextDecoder;let a="";for(;;){const{done:n,value:v}=await g.read();if(n)break;const b=c.decode(v).split(`
`);for(const j of b)if(j.startsWith("data: ")){const w=j.slice(6);if(w.trim()){a=w,g.cancel();break}}if(a)break}if(console.log("chatWithDraftAgent result=====>",a),!a||a.trim()==="")throw new Error("Empty response from server");return a}catch(d){throw console.error("Error in chatWithDraftAgent:",d),d}},ae=h.createContext();function me({children:i}){const[p,o]=h.useState([]),[u,d]=h.useState([]),[g,c]=h.useState({}),[a,n]=h.useState(""),[v,y]=h.useState("idea-submission"),[b,j]=h.useState([]),[w,t]=h.useState(""),[x,s]=h.useState([]),[m,l]=h.useState(""),[r,N]=h.useState(""),[k,I]=h.useState(""),[L,P]=h.useState(!1),[W,B]=h.useState(!1),[E,M]=h.useState(null),[$,_]=h.useState(!1);console.log({loading:$}),h.useEffect(()=>{b.length>0&&b.forEach(R=>{c(U=>({...U,[R.section_heading]:"Currently we have not completed this section."}))})},[b]);const A={idea:r,title:m,all_sections:b,user_context:E},D=async()=>{if(console.log("handleSend called"),!a.trim())return;const R={role:"user",content:a},U=[...p,R];o(U);const V=a;n("");try{if(_(!0),v==="idea-submission"){let f=await Y(w,V,!1,A);try{f.startsWith("data: ")?f=JSON.parse(f==null?void 0:f.slice(6)):f=JSON.parse(f)}catch(C){throw console.error("JSON parsing error:",C),console.error("Raw response:",f),new Error(`Failed to parse server response: ${C.message}`)}console.log("ðŸš€ ~ handleSend ~ res:",f),f.type==="interrupt"?f.action==="get_question_response"?(o(C=>[...C,{role:"assistant",content:f.question,reason:f.reason,section:f.section,subsection:f.subsection}]),y("question-response")):f.action==="get_structure_review"&&(t(f.session_id),j(f.all_sections),l(f.title),N(f.idea),y("structure-review")):f.type==="end"&&console.log("Document completed:",f)}else if(v==="question-response"){let f=await Y(w,V,!0,A);try{f.startsWith("data: ")?f=JSON.parse(f==null?void 0:f.slice(6)):f=JSON.parse(f)}catch(C){throw console.error("JSON parsing error:",C),console.error("Raw response:",f),new Error(`Failed to parse server response: ${C.message}`)}console.log("ðŸš€ ~ handleSend ~ question response:",f),f.type==="interrupt"&&(f.action==="get_question_response"?o(C=>[...C,{role:"assistant",content:f.question,reason:f.reason,section:f.section,subsection:f.subsection}]):f.action==="get_structure_review"&&(t(f.session_id),j(f.all_sections),l(f.title),N(f.idea),y("structure-review")))}}catch(f){const C=f.message||"An unexpected error occurred";console.error("Error during chat interaction:",C);let O="I apologize, but I encountered an error. Please try again.";C.includes("Failed to fetch")||C.includes("Network Error")?O="Network connection error. Please check your internet connection and try again.":C.includes("Empty response")?O="The server returned an empty response. Please try again.":C.includes("HTTP error")&&(O="Server connection error. Please ensure the backend server is running."),o([...U,{role:"assistant",content:O}])}finally{_(!1)}},H=async()=>{var V,f,C,O;if(!a.trim()&&k&&!L)return;_(!0);let R=[...u];if(k&&!L){const S={role:"user",content:a};R=[...u,S],d(R)}const U=L?g[k]:a;n("");try{let S=await Y(w,U,!0,A);P(!1);try{S.startsWith("data: ")?S=JSON.parse(S==null?void 0:S.slice(6)):S=JSON.parse(S)}catch(F){throw console.error("JSON parsing error:",F),console.error("Raw response:",S),new Error(`Failed to parse server response: ${F.message}`)}console.log("ðŸš€ ~ submitIdea ~ res:",S);const{action:z,section:Q,question:ie,reason:oe,draft:K}=S;if(z!="generate_document"&&I(Q),z=="generate_document"&&((V=S==null?void 0:S.final_state)!=null&&V.all_drafts))c((f=S==null?void 0:S.final_state)==null?void 0:f.all_drafts),B(!0),d([...R,{role:"assistant",content:"## **We have completed all the sections. Download the draft from draft section.**"}]);else if(z=="get_question_response"){const F={...g,[Q]:K};console.log("draft ===>",F),d([...R,{role:"assistant",content:`${ie}`,reason:`${oe}`}]),K&&K.length>0&&c(F)}else if(z=="get_reviewed_section_draft"){P(!0),d([...R,{role:"assistant",content:`Please check the **${k}** section draft.

If you like the draft click on the **Continue** button, or edit the draft`}]);const F={...g,[Q]:K};console.log("draft ===>",F),c(F)}else z=="get_review_changes"&&d([...R,{role:"assistant",content:"Please reply with the changes you want to make."}])}catch(S){d([...R,{role:"assistant",content:"I apologize, but I encountered an error. Please try again."}]);const z=((O=(C=S.response)==null?void 0:C.data)==null?void 0:O.message)||"An unexpected error occurred";console.error("Error during chat interaction:",z)}finally{_(!1)}};console.log("draft",{draftMessages:u,drafts:g});const le=()=>{y("idea-submission"),j([]),t(""),s([]),l(""),o([]),d([]),c({}),I(""),n(""),_(!1),N(""),B(!1),P(!1),M(null)};return e.jsx(ae.Provider,{value:{messages:p,setMessages:o,input:a,setInput:n,handleSend:D,handleNewChat:le,initialChatStep:v,setInitialChatStep:y,contractSections:b,setContractSections:j,titles:x,setTitles:s,selectedTitle:m,setSelectedTitle:l,session_id:w,setSession_id:t,handleDraftChat:H,draftMessages:u,drafts:g,setDrafts:c,activeSection:k,loading:$,rephrasedIdea:r,setRephrasedIdea:N,isReviewedSectionDraftActive:L,setIsReviewedSectionDraftActive:P,isDraftingComplete:W,userContext:E,setUserContext:M},children:i})}function T(){return h.useContext(ae)}function ue(){const{contractSections:i,setContractSections:p,setInitialChatStep:o}=T(),[u,d]=h.useState(new Set),[g,c]=h.useState(null),[a,n]=h.useState(null);console.log("ContractSectionDisplayComponent");const v=["bg-blue-50 border-blue-200 hover:bg-blue-100","bg-green-50 border-green-200 hover:bg-green-100","bg-purple-50 border-purple-200 hover:bg-purple-100","bg-orange-50 border-orange-200 hover:bg-orange-100"],y=x=>{const s=new Set(u);s.has(x)?s.delete(x):s.add(x),d(s)},b=x=>{p(i.filter((s,m)=>m!==x))},j=(x,s,m)=>{const l=[...i];l[x][s]=m,p(l)},w=(x,s)=>{if(i[x].subsections.length<=1){alert("At least one subsection is required");return}const l=[...i];l[x].subsections=l[x].subsections.filter((r,N)=>N!==s),p(l)},t=(x,s,m,l)=>{const r=[...i];r[x].subsections[s][m]=l,p(r)};return e.jsx("div",{className:"min-h-screen p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("p",{className:"text-lg text-gray-600",children:"Based on idea provided, we have suggest the following sections and subsections."})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map((x,s)=>{var m;return e.jsxs("div",{className:`${v[s%v.length]} border-2 rounded-xl p-6 shadow-md ${u.has(s)?"":"max-h-48"} `,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:()=>y(s),className:"text-gray-600 hover:text-gray-800",children:u.has(s)?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"purple",children:e.jsx("path",{d:"M5 8l7 11 7-11z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"purple",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(s),className:"text-purple-600 hover:text-purple-800 text-sm",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"purple",children:e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"})})}),e.jsx("button",{onClick:()=>b(s),className:"text-red-600 hover:text-red-800 text-sm",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"#dc2626",children:e.jsx("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),g===s?e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block text-sm font-medium text-gray-700 mb-1",children:"Section Heading"}),e.jsx("input",{type:"text",value:x.section_heading,onChange:l=>j(s,"section_heading",l.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block text-sm font-medium text-gray-700 mb-1",children:"Section Purpose"}),e.jsx("textarea",{value:x.section_purpose,onChange:l=>j(s,"section_purpose",l.target.value),className:"w-full p-2 border border-gray-300 rounded-md h-20"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(null),className:"startPocButton",children:"Save"}),e.jsx("button",{onClick:()=>c(null),className:"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:x.section_heading}),e.jsx("p",{className:"text-gray-600 mb-4",children:x.section_purpose})]}),u.has(s)&&e.jsxs("div",{className:"mt-6 pt-4 border-t-2",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Subsections"})}),e.jsx("div",{className:"space-y-3",children:(m=x==null?void 0:x.subsections)==null?void 0:m.map((l,r)=>e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"flex-1",children:a===`${s}-${r}`?e.jsxs("div",{className:"space-y-3 text-left",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block text-sm font-medium text-gray-700 mb-1",children:"Subsection Heading"}),e.jsx("input",{type:"text",value:l.subsection_heading,onChange:N=>t(s,r,"subsection_heading",N.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block text-sm font-medium text-gray-700 mb-1",children:"Subsection Definition"}),e.jsx("textarea",{value:l.subsection_definition,onChange:N=>t(s,r,"subsection_definition",N.target.value),className:"w-full p-2 border border-gray-300 rounded-md h-16"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n(null),className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-700",children:"Save"}),e.jsx("button",{onClick:()=>n(null),className:"bg-gray-50 border border-gray-200 text-gray-700 px-3 py-1 rounded-lg text-sm hover:bg-gray-400",children:"Cancel"})]})]}):e.jsxs("div",{className:"text-left",children:[e.jsx("h5",{className:"font-semibold text-gray-800 mb-1",children:l.subsection_heading}),e.jsx("p",{className:"text-gray-600 text-sm",children:l.subsection_definition})]})}),a!==`${s}-${r}`&&e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>n(`${s}-${r}`),className:"text-purple-600 hover:text-purple-800 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>w(s,r),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]})},r))})]})]},s)})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("div",{className:"flex gap-6 items-center justify-center",children:e.jsx("button",{className:"startPocButton",onClick:()=>o("done"),children:"Start Drafting Contract"})})})]})})}function X(){const{messages:i,input:p,setInput:o,handleSend:u,handleNewChat:d,initialChatStep:g,contractSections:c,selectedTitle:a,rephrasedIdea:n,setSelectedTitle:v,setRephrasedIdea:y,loading:b}=T(),j=h.useRef(null);console.log({loading:b}),h.useEffect(()=>{var t;(t=j.current)==null||t.scrollIntoView({behavior:"smooth"})},[i,b]);const w=async(t,x)=>{const s=t.target.textContent;try{x==="title"?v(s):y(s)}catch(m){console.error(`Error updating ${x}:`,m)}};return console.log("messages:",i),e.jsxs("div",{className:"chat-container",children:[i.length==0&&e.jsxs("div",{className:"flex flex-col items-center justify-center align-middle text-center",style:{minHeight:"500px"},children:[e.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Contract Generation Platform"}),e.jsx("h2",{className:"chat-title",children:"Transforming Concepts into Professional Contracts"})]}),i.length>0&&e.jsx("div",{className:"chat-scroll",children:e.jsx("div",{className:"chat-messages",children:e.jsxs(se.Fragment,{children:[i.length>0&&e.jsx("div",{className:"chat-bubble user",children:e.jsx(J,{remarkPlugins:[q],children:i[0].content})}),b&&e.jsx("div",{className:"chat-bubble assistant",children:e.jsxs("div",{className:"typing-animation",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})}),a.length>0&&e.jsx("div",{className:"chat-bubble assistant",id:"selectedTitle",contentEditable:!0,suppressContentEditableWarning:!0,onBlur:t=>{t.target.textContent!==a&&w(t,"title")},children:e.jsx(J,{remarkPlugins:[q],children:`### **${a}**`})}),n.length>0&&e.jsx("div",{className:"chat-bubble assistant",id:"rephrasedIdea",contentEditable:!0,suppressContentEditableWarning:!0,onBlur:t=>{t.target.textContent!==n&&w(t,"idea")},children:e.jsx(J,{remarkPlugins:[q],children:n})}),c.length>0&&e.jsx("div",{className:"flex flex-col items-start justify-start",children:e.jsx(ue,{})})]})})}),e.jsxs(G.div,{className:"chat-input-box",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("textarea",{placeholder:g=="idea-submission"?"What problem are you interested in solving?":"",value:p,onChange:t=>{o(t.target.value),t.target.style.height="auto",t.target.style.height=`${Math.min(Math.max(t.target.scrollHeight,60),150)}px`},onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),u())},className:"chat-input",style:{resize:"none",minHeight:"60px",maxHeight:"150px",overflow:"auto"}}),e.jsx("button",{onClick:u,className:"send-button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"send-icon",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21l16.5-9L3.75 3v7.5l11.25 1.5-11.25 1.5V21z"})})})]})]})}function xe({steps:i,title:p}){const{activeSection:o,isDraftingComplete:u}=T(),d=(g,c)=>{if((g.section_heading||g.title)===o)return"current";if(o){const n=i.findIndex(v=>(v.section_heading||v.title)===o);if(n!==-1&&c<n||u)return"completed"}return"upcoming"};return e.jsx("div",{className:"bg-transparent shadow-sm",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:i&&i.length>0?i.map((g,c)=>{const a=d(g,c);return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`
                        flex items-center justify-center w-6 h-6 rounded-full 
                        ${a==="completed"||u?" text-green-500 ring-2 ring-green-700":a==="current"?" text-purple-700 ring-2 ring-purple-700":"bg-gray-100 text-gray-600"}
                        font-semibold text-sm transition-colors duration-200
                      `,children:a==="completed"||u?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):c+1}),e.jsx("span",{className:`
                        mt-2 text-xs font-medium text-capitalize
                        ${a==="completed"||u?"text-green-600":a==="current"?"text-purple-800":"text-gray-500"}
                      `,children:g.section_heading||g.title})]}),c<i.length-1&&e.jsx("div",{className:`
                        h-0.5 w-40 mx-2
                        ${a==="completed"||u?"bg-green-500":a==="current"?"bg-purple-500":"bg-gray-200"}
                      `})]},c)}):e.jsx("div",{className:"text-gray-500",children:"No steps available"})})})})}const he="modulepreload",ge=function(i){return"/contract-gen/"+i},ee={},ne=function(p,o,u){let d=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),a=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));d=Promise.allSettled(o.map(n=>{if(n=ge(n),n in ee)return;ee[n]=!0;const v=n.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${y}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":he,v||(b.as="script"),b.crossOrigin="",b.href=n,a&&b.setAttribute("nonce",a),document.head.appendChild(b),v)return new Promise((j,w)=>{b.addEventListener("load",j),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${n}`)))})}))}function g(c){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=c,window.dispatchEvent(a),!a.defaultPrevented)throw c}return d.then(c=>{for(const a of c||[])a.status==="rejected"&&g(a.reason);return p().catch(g)})},pe=async(i,p)=>{const{Document:o,Packer:u,Paragraph:d,TextRun:g}=await ne(async()=>{const{Document:j,Packer:w,Paragraph:t,TextRun:x}=await import("./index-C61u3LdB.js");return{Document:j,Packer:w,Paragraph:t,TextRun:x}},[]),c=(j,w)=>{const t=[];t.push(new d({children:[new g({text:j,bold:!0,color:"2F5496",size:32,font:"Calibri"})],spacing:{after:200}}));const x=w.split(/\n+/).filter(Boolean);for(const s of x)t.push(new d({children:[new g({text:s,size:22,font:"Calibri"})],spacing:{after:200,line:276}}));return t},a=new o({sections:[{properties:{},children:Object.entries(i).flatMap(([j,w])=>c(j,w))}]}),n=await u.toBlob(a),v=window.URL.createObjectURL(n),y=document.createElement("a"),b=p||"draft";y.href=v,y.download=`${b}.docx`,document.body.appendChild(y),y.click(),document.body.removeChild(y)},fe=()=>{const{drafts:i,setDrafts:p,contractSections:o,activeSection:u,isDraftingComplete:d,selectedTitle:g}=T(),[c,a]=h.useState({}),n=h.useRef({}),v=h.useRef({}),y=h.useRef(null),[b,j]=h.useState(!1),[w,t]=h.useState(null);h.useEffect(()=>{const s=JSON.parse(localStorage.getItem("savedIdeas")||"{}"),m=`${g}_${Object.keys(i).length}`;s[m]&&(j(!0),t(s[m]))},[g,i]);const x=s=>{a(m=>({[s]:!m[s]}))};return h.useEffect(()=>{u&&a(()=>({[u]:!0}))},[u]),h.useLayoutEffect(()=>{if(u&&c[u]&&v.current[u]&&y.current){const s=v.current[u],m=y.current,l=s.offsetTop,r=m.offsetTop,k=l-r-20;setTimeout(()=>{m.scrollTo({top:k,behavior:"smooth"})},150)}},[u,c,i]),e.jsxs("div",{ref:y,className:"pl-3 w-full",style:{maxWidth:"1024px",margin:"0 auto",height:"75vh",overflowY:"auto"},children:[d&&e.jsx("div",{children:e.jsx("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1F2937",marginBottom:"16px"},children:"Contract Document - Ready for Review"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:o.map((s,m)=>e.jsxs("div",{ref:l=>n.current[s==null?void 0:s.section_heading]=l,style:{borderRadius:"16px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E5E7EB",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"16px",cursor:"pointer",borderBottom:"1px solid #F3F4F6"},onClick:()=>x(s==null?void 0:s.section_heading),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{className:"flex flex-col items-start text-left",children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937"},children:s==null?void 0:s.section_heading}),e.jsx("div",{className:"text-left",style:{fontSize:"12px",fontWeight:"600",color:"#1F2937"},children:s==null?void 0:s.section_purpose})]}),c[s==null?void 0:s.section_heading]?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"purple",children:e.jsx("path",{d:"M5 8l7 11 7-11z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"purple",children:e.jsx("path",{d:"M8 5v14l11-7z"})})]})}),c[s==null?void 0:s.section_heading]&&e.jsx("div",{ref:l=>v.current[s==null?void 0:s.section_heading]=l,style:{padding:"24px"},children:e.jsx("div",{style:{position:"relative"},children:c[`${s==null?void 0:s.section_heading}-edit`]?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("textarea",{value:i[s==null?void 0:s.section_heading]||"",onChange:l=>p(r=>({...r,[s==null?void 0:s.section_heading]:l.target.value})),style:{width:"100%",minHeight:"300px",padding:"8px",border:"1px solid #E5E7EB",borderRadius:"4px",resize:"vertical"}}),e.jsx("button",{onClick:l=>{l.stopPropagation(),a(r=>({...r,[`${s==null?void 0:s.section_heading}-edit`]:!1}))},style:{cursor:"pointer",fontSize:"14px",background:"linear-gradient(to right, #c59c51, #eab308)",border:"none",padding:"8px",borderRadius:"9999px",color:"white",marginTop:"10px"},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}):e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("div",{className:"text-left w-full",children:e.jsx(J,{remarkPlugins:[q],children:i[s==null?void 0:s.section_heading]})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),a(r=>({...r,[`${s==null?void 0:s.section_heading}-edit`]:!0}))},style:{cursor:"pointer",fontSize:"14px",background:"linear-gradient(to right, #c59c51, #eab308)",border:"none",padding:"8px",borderRadius:"9999px",color:"white"},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"m18.5 2.5 3 3L12 15l-4 1 1-4Z"})]})})]})})})]},m))}),d&&e.jsx("div",{style:{marginTop:"32px",padding:"16px",borderTop:"1px solid #E5E7EB"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[b?e.jsx("div",{style:{padding:"12px 24px",borderRadius:"8px",background:"#E5E7EB",color:"#6B7280",fontWeight:"600",fontSize:"14px",textAlign:"center"},children:"âœ… Contract Saved to Catalog"}):e.jsx("button",{style:{cursor:"pointer",fontSize:"14px",background:"linear-gradient(to right, #10B981, #059669)",border:"none",padding:"12px 24px",borderRadius:"8px",color:"white",fontWeight:"600"},onClick:async()=>{try{const s=Object.entries(i).map(([l,r])=>`## ${l}

${r}`).join(`

`),m=await fetch("/apcontract/contracts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:g||"Untitled Idea",idea:s,drafts:i,status:"submitted",metadata:{is_poc_document:!0,sections_count:Object.keys(i).length,created_at:new Date().toISOString(),submitted_by:"User",department:"General",summary_type:"complete_poc_document"}})});if(m.ok){const l=await m.json();j(!0),t(l.session_id);const r=JSON.parse(localStorage.getItem("savedIdeas")||"{}"),N=`${g}_${Object.keys(i).length}`;r[N]=l.session_id,localStorage.setItem("savedIdeas",JSON.stringify(r)),alert("Contract saved successfully! It will now appear in the Contract Catalog for review."),console.log("Contract saved with session ID:",l.session_id)}else{const l=await m.text();console.error("Save failed:",l),alert("Failed to save idea. Please check if the backend server is running.")}}catch(s){console.error("Error saving idea:",s),alert("Error saving idea. Please check if the backend server is running at http://localhost:8000")}},children:"Save Contract to Catalogue"}),e.jsx("button",{style:{cursor:"pointer",fontSize:"14px",background:"linear-gradient(to right, #c59c51, #eab308)",border:"none",padding:"12px 24px",borderRadius:"8px",color:"white",fontWeight:"600"},onClick:()=>pe(i,g),children:"Download"})]})})]})};function be(){const{input:i,setInput:p,handleDraftChat:o,draftMessages:u,loading:d,isReviewedSectionDraftActive:g}=T(),c=h.useRef(null);return h.useEffect(()=>{var a;(a=c.current)==null||a.scrollIntoView({behavior:"smooth"})},[u,d]),h.useEffect(()=>{console.log("this runs twise"),o()},[]),e.jsxs("div",{className:"flex flex-col h-full w-full pr-3",children:[e.jsx("div",{className:"chat-scroll",children:e.jsx("div",{className:"chat-messages",children:e.jsxs(se.Fragment,{children:[u.map((a,n)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:`chat-bubble ${a.role==="user"?"user":"assistant"}`,children:[(a==null?void 0:a.reason)&&e.jsxs("span",{className:"tooltip",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"purple","stroke-width":"1.5",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"8","stroke-linecap":"round"}),e.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"16","stroke-linecap":"round"})]}),e.jsx("span",{className:"tooltip-content",children:a==null?void 0:a.reason})]}),e.jsx(J,{remarkPlugins:[q],children:a.content})]},n)})),g&&e.jsx("button",{className:"startPocButton",onClick:()=>o(),children:"Continue"}),d&&e.jsx("div",{className:"chat-bubble assistant",children:e.jsxs("div",{className:"typing-animation",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{ref:c})]})})}),e.jsxs(G.div,{className:"chat-input-box mx-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("textarea",{placeholder:u.length>0?"":"Let's start by sharing your project idea or business concept here.",value:i,onChange:a=>{p(a.target.value),a.target.style.height="auto",a.target.style.height=`${Math.min(Math.max(a.target.scrollHeight,60),150)}px`},onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),o())},className:"chat-input",style:{resize:"none",minHeight:"60px",maxHeight:"150px",overflow:"auto"}}),e.jsx("button",{onClick:o,className:"send-button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"send-icon",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21l16.5-9L3.75 3v7.5l11.25 1.5-11.25 1.5V21z"})})})]})]})}function te(){const{initialChatStep:i,contractSections:p,selectedTitle:o}=T(),[u,d]=h.useState(!0);return i!=="done"?null:e.jsxs("div",{className:"draft-container flex flex-col h-screen bg-gradient-to-br from-indigo-50 to-purple-50",children:[e.jsx("h1",{className:"text-4xl font-bold text-purple-800 my-4",children:o}),e.jsx(xe,{steps:p,title:o}),e.jsx("div",{className:"border border-b-0 mb-2 border-purple-100"}),e.jsx("div",{className:"flex items-center justify-start position-relative h-0 ",children:e.jsx("button",{style:{position:"fixed",top:"105px"},onClick:()=>d(!u),className:"p-1 bg-purple-50 hover:bg-purple-100 rounded-full send-button z-10 position-sticky top-30",children:u?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[u&&e.jsx("div",{className:`${u?"w-1/2":"w-0"} border-r border-purple-100`,children:e.jsx(be,{})}),e.jsx("div",{className:`transition-all duration-200 ${u?"w-1/2":"w-full"} `,style:{resize:"horizontal",overflow:"auto",minWidth:"300px"},children:e.jsx(fe,{})})]})]})}const ve=()=>{const[i,p]=h.useState([]),[o,u]=h.useState("all"),[d,g]=h.useState(""),[c,a]=h.useState(!0),[n,v]=h.useState(null);h.useEffect(()=>{(async()=>{try{const x=await fetch("/apcontract/contracts");if(x.ok){const s=await x.json(),m=new Map;s.ideas.forEach(r=>{var N,k,I,L,P,W;if(!m.has(r.session_id)){const E=(()=>{var _;const M=r.all_drafts||r.drafts||{};if(Object.keys(M).length>0){let A="";if(Object.entries(M).forEach(([D,H])=>{H&&H.trim()&&(A+=`## ${D}

${H}

`)}),A.trim())return A}const $=r.conversation_history||((_=r.metadata)==null?void 0:_.conversation_history)||[];if($&&$.length>0){const A=$.filter(D=>D.role==="user"||D.type==="user").map(D=>D.content||D.message||"").filter(D=>D&&D.length>10);if(A.length>0)return A.join(`

`)}return r.idea||r.rephrased_idea||r.description||"Contract details will be available after completion"})();m.set(r.session_id,{id:r.session_id,title:r.title||"Untitled Contract",department:((N=r.metadata)==null?void 0:N.department)||"General",status:r.status==="completed"||r.status==="in_progress"?"submitted":r.status||"submitted",submittedBy:((k=r.metadata)==null?void 0:k.submitted_by)||"Anonymous",submittedDate:(I=r.metadata)!=null&&I.created_at?new Date(r.metadata.created_at).toISOString().split("T")[0]:"Unknown",evaluationScore:((L=r.metadata)==null?void 0:L.evaluation_score)||r.evaluation_score||null,reviewerFeedback:((P=r.metadata)==null?void 0:P.reviewer_feedback)||r.reviewer_feedback||null,summary:E,category:((W=r.metadata)==null?void 0:W.category)||"General"})}});const l=Array.from(m.values());p(l)}else console.error("Failed to fetch contracts:",x.status),p([])}catch(x){console.error("Error fetching contracts:",x),p([])}finally{a(!1)}})()},[]);const y=i.filter(t=>{const x=o==="all"||t.status===o,s=t.title.toLowerCase().includes(d.toLowerCase())||t.summary.toLowerCase().includes(d.toLowerCase())||t.department.toLowerCase().includes(d.toLowerCase());return x&&s}),b=t=>{switch(t){case"submitted":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=t=>{switch(t){case"AI & Automation":return"bg-purple-100 text-purple-800";case"Analytics & Reporting":return"bg-indigo-100 text-indigo-800";case"Process Automation":return"bg-teal-100 text-teal-800";default:return"bg-gray-100 text-gray-800"}},w={total:i.length,pending_review:i.filter(t=>t.status==="submitted").length,approved:i.filter(t=>t.status==="approved").length,rejected:i.filter(t=>t.status==="rejected").length};return c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading contract catalog..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Contracts"}),e.jsx("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:w.total})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Review"}),e.jsx("dd",{className:"mt-1 text-3xl font-semibold text-yellow-600",children:w.pending_review})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Approved"}),e.jsx("dd",{className:"mt-1 text-3xl font-semibold text-green-600",children:w.approved})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Rejected"}),e.jsx("dd",{className:"mt-1 text-3xl font-semibold text-red-600",children:w.rejected})]})})]}),e.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search contracts by title, department, or description...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:d,onChange:t=>g(t.target.value)})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onChange:t=>u(t.target.value),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(t=>e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 cursor-pointer",onClick:()=>v(t),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 flex-1 mr-2",children:t.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${b(t.status)}`,children:t.status.replace("_"," ")})]}),e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${j(t.category)}`,children:t.category})}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Department:"}),e.jsx("span",{className:"font-medium",children:t.department})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Submitted by:"}),e.jsx("span",{className:"font-medium",children:t.submittedBy})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Date:"}),e.jsx("span",{className:"font-medium",children:t.submittedDate})]}),t.evaluationScore&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Score:"}),e.jsxs("span",{className:`font-medium ${t.evaluationScore>=70?"text-green-600":t.evaluationScore>=50?"text-yellow-600":"text-red-600"}`,children:[t.evaluationScore,"/100"]})]})]})]})},t.id))}),n&&e.jsx("div",{className:"fixed inset-0 overflow-y-auto z-50",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:n.title}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${b(n.status)}`,children:n.status.replace("_"," ")}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${j(n.category)}`,children:n.category})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Department:"})," ",n.department]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Submitted by:"})," ",n.submittedBy]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",n.submittedDate]}),n.evaluationScore&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Score:"}),e.jsxs("span",{className:`ml-1 ${n.evaluationScore>=70?"text-green-600":n.evaluationScore>=50?"text-yellow-600":"text-red-600"}`,children:[n.evaluationScore,"/100"]})]})]}),(n.status==="approved"||n.status==="rejected")&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Reviewer Evaluation"}),n.evaluationScore&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-medium",children:"Score:"}),e.jsxs("span",{className:`ml-2 ${n.evaluationScore>=70?"text-green-600":n.evaluationScore>=50?"text-yellow-600":"text-red-600"}`,children:[n.evaluationScore,"/100"]})]}),n.reviewerFeedback&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Feedback:"}),e.jsx("div",{className:"mt-1 bg-gray-50 p-3 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:n.reviewerFeedback})})]})]})]}),e.jsx("div",{className:"mt-5 sm:mt-6",children:e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm",onClick:()=>v(null),children:"Close"})})]})]})}),y.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contracts found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d||o!=="all"?"Try adjusting your search or filter criteria":"Be the first to submit a contract!"})]})]})})})},je=()=>{const[i,p]=h.useState([]),[o,u]=h.useState(null),[d,g]=h.useState(!0),[c,a]=h.useState("ai-reviewer"),[n,v]=h.useState(null);h.useEffect(()=>{(async()=>{try{const x=await fetch("/apcontract/contracts");if(x.ok){const s=await x.json(),m=new Map;s.ideas.forEach(r=>{var N,k,I,L,P;if(!m.has(r.session_id)&&(r.status==="submitted"||r.status==="completed"||r.status==="in_progress")){const W=()=>{console.log("=== DEBUG: Processing contract ==="),console.log("Contract title:",r.title),console.log("Contract session_id:",r.session_id),console.log("Contract status:",r.status),console.log("All drafts:",r.all_drafts),console.log("Drafts:",r.drafts),console.log("Contract content:",r.idea),console.log("Rephrased contract:",r.rephrased_idea),console.log("Original contract:",r.original_idea);const E=r.drafts||r.all_drafts||{};if(console.log("Using drafts object:",E),console.log("Drafts keys:",Object.keys(E)),Object.keys(E).length>0){console.log("Found drafts sections:",Object.keys(E));let M="";return Object.entries(E).forEach(([$,_])=>{console.log(`Section: ${$}, Draft content:`,_),console.log(`Section ${$} has content:`,_&&_.trim()&&_!=="No draft content available"),_&&_.trim()&&_!=="No draft content available"&&(M+=`## ${$}

${_}

`)}),M.trim()?(console.log("âœ… SUCCESS: Returning full draft content"),M):(console.log("âš ï¸ WARNING: Drafts exist but no valid content found - using fallback"),`## Contract Summary

This contract has draft sections but the content appears to be empty or placeholder text.

**Available Sections:** ${Object.keys(E).join(", ")}

Please check if the Q&A process was completed properly.`)}else return console.log("âš ï¸ WARNING: No drafts found in contract object - using fallback content"),r.idea&&r.idea.trim()&&r.idea!=="No draft content available"?(console.log("âœ… Using contract content as fallback"),r.idea):r.rephrased_idea&&r.rephrased_idea.trim()?(console.log("âœ… Using rephrased contract as fallback"),r.rephrased_idea):r.original_idea&&r.original_idea.trim()&&r.original_idea!=="No draft content available"?(console.log("âœ… Using original contract as fallback"),r.original_idea):(console.log("âš ï¸ No content available - using default message"),"Contract document content will be available after completing the Q&A process. This contract is still in progress or the draft content has not been generated yet.")};let B;try{B=W()}catch(E){console.error("Error generating draft:",E),B=`Error generating draft content: ${E.message}

Please check the browser console for detailed debug information.`}m.set(r.session_id,{id:r.session_id,title:r.title||"Untitled Contract",department:((N=r.metadata)==null?void 0:N.department)||"Legal",status:r.status==="completed"||r.status==="in_progress"?"submitted":r.status||"submitted",submittedBy:((k=r.metadata)==null?void 0:k.submitted_by)||"Anonymous",submittedDate:(I=r.metadata)!=null&&I.created_at?new Date(r.metadata.created_at).toISOString().split("T")[0]:"Unknown",evaluationScore:((L=r.metadata)==null?void 0:L.evaluation_score)||r.evaluation_score||null,reviewerFeedback:((P=r.metadata)==null?void 0:P.reviewer_feedback)||r.reviewer_feedback||null,aiScore:r.ai_score||null,aiFeedback:r.ai_feedback||null,aiStrengths:r.ai_strengths||[],aiImprovements:r.ai_improvements||[],aiRiskLevel:r.ai_risk_level||"Medium",summary:B})}});const l=Array.from(m.values());p(l)}else console.error("Failed to fetch contracts:",x.status),p([])}catch(x){console.error("Error fetching contracts:",x),p([])}finally{g(!1)}})()},[]);const y=async(t,x,s,m)=>{try{(await fetch("/apcontract/update-contract-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:t,status:m,evaluation_score:x,reviewer_feedback:s})})).ok?(p(r=>r.map(N=>N.id===t?{...N,evaluationScore:x,status:m,reviewerFeedback:s}:N)),u(null),alert("Contract evaluation saved successfully!")):alert("Failed to save evaluation. Please try again.")}catch(l){console.error("Error updating contract status:",l),alert("Error saving evaluation. Please try again.")}},b=t=>{switch(t){case"submitted":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=t=>t>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600",w=t=>{switch(t){case"Low":return"text-green-600 bg-green-100";case"Medium":return"text-yellow-600 bg-yellow-100";case"High":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading contracts..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5 py-4",children:[e.jsx("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Contracts for Review"}),e.jsx("dd",{className:"mt-1 text-2xl font-semibold text-gray-900",children:i.length})]})}),e.jsx("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Review"}),e.jsx("dd",{className:"mt-1 text-2xl font-semibold text-yellow-600",children:i.filter(t=>t.status==="submitted").length})]})}),e.jsx("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Approved"}),e.jsx("dd",{className:"mt-1 text-2xl font-semibold text-green-600",children:i.filter(t=>t.status==="approved").length})]})}),e.jsx("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Rejected"}),e.jsx("dd",{className:"mt-1 text-2xl font-semibold text-red-600",children:i.filter(t=>t.status==="rejected").length})]})}),e.jsx("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Avg. Score"}),e.jsx("dd",{className:"mt-1 text-2xl font-semibold text-green-600",children:Math.round(i.filter(t=>t.evaluationScore).reduce((t,x)=>t+x.evaluationScore,0)/(i.filter(t=>t.evaluationScore).length||1))})]})})]}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>a("ai-reviewer"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${c==="ai-reviewer"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"AI Legal Reviewer"}),e.jsx("button",{onClick:()=>a("contract-review"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${c==="contract-review"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Human Contract Review"})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"px-4 sm:px-0",children:[c==="ai-reviewer"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Legal Reviewer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Contracts are automatically scored by AI when submitted"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsx("p",{children:"All contracts are automatically evaluated by AI as soon as they are uploaded. Click on any contract to view detailed AI legal feedback, scores, and risk assessments."})})]}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"AI-Scored Contracts"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Click on any contract to view detailed AI legal feedback"})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[i.map(t=>e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"px-4 py-4 hover:bg-gray-50 cursor-pointer",onClick:()=>v(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:t.title}),e.jsx("div",{className:"ml-2 flex-shrink-0 flex gap-2",children:t.aiScore!==null?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j(t.aiScore)} bg-opacity-20`,children:["AI Score: ",t.aiScore,"/100"]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${w(t.aiRiskLevel)}`,children:["Risk: ",t.aiRiskLevel]})]}):e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:"AI Score: Pending"})})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("strong",{children:"Department:"})," ",t.department]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("strong",{children:"Submitted by:"})," ",t.submittedBy]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("strong",{children:"Date:"})," ",t.submittedDate]})]})]}),e.jsx("div",{className:"ml-5 flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})},t.id)),i.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contracts available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Submit a contract to see AI scores and legal feedback."})]})]})]})]}),c==="contract-review"&&e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Contract Review"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Review and evaluate submitted contracts"})]}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[i.map(t=>e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"px-4 py-4 hover:bg-gray-50 cursor-pointer",onClick:()=>u(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:t.title}),e.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b(t.status)}`,children:t.status.replace("_"," ")})})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("strong",{children:"Department:"})," ",t.department]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("strong",{children:"Submitted by:"})," ",t.submittedBy]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("strong",{children:"Date:"})," ",t.submittedDate]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:async x=>{x.stopPropagation();try{const{jsPDF:s}=await ne(async()=>{const{jsPDF:N}=await import("./jspdf.es.min-BSndlB8C.js").then(k=>k.j);return{jsPDF:N}},[]),m=new s;let l=20;m.setFontSize(20),m.setFont(void 0,"bold"),m.text(t.title,20,l),l+=15,m.setFontSize(12),m.setFont(void 0,"normal"),m.text(`Department: ${t.department}`,20,l),l+=8,m.text(`Submitted by: ${t.submittedBy}`,20,l),l+=8,m.text(`Date: ${t.submittedDate}`,20,l),l+=8,m.text(`Status: ${t.status}`,20,l),l+=8,t.evaluationScore&&(m.text(`Evaluation Score: ${t.evaluationScore}/100`,20,l),l+=8),l+=10,m.setFontSize(14),m.setFont(void 0,"bold"),m.text("Contract Document Content:",20,l),l+=10,m.setFontSize(10),m.setFont(void 0,"normal"),t.summary&&t.summary.trim()&&!t.summary.includes("Contract document content will be available after completing the Q&A process")?m.splitTextToSize(t.summary,170).forEach(k=>{l>270&&(m.addPage(),l=20),m.text(k,20,l),l+=6}):["âŒ ERROR: No draft content available for PDF generation","","Debug Information:",`- Contract Title: ${t.title}`,`- Contract Status: ${t.status}`,`- Has Summary: ${!!t.summary}`,`- Summary Length: ${t.summary?t.summary.length:0}`,"","Possible Issues:","1. The contract may not have completed the Q&A process","2. Draft content may not have been saved to database","3. The draft generation process may have failed","","Please check the browser console for detailed debug logs."].forEach(k=>{l>270&&(m.addPage(),l=20),m.text(k,20,l),l+=6}),m.save(`${t.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_contract_document.pdf`)}catch(s){console.error("Error generating PDF:",s),alert(`PDF Generation Error: ${s.message}

Check browser console for detailed debug information.`)}},className:"bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded-md text-xs font-medium transition-colors duration-200",children:"ðŸ“„ Download as PDF"})}),t.evaluationScore&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Evaluation Score: ",e.jsxs("span",{className:"text-green-600",children:[t.evaluationScore,"/100"]})]})})]}),e.jsx("div",{className:"ml-5 flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})},t.id)),i.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contracts submitted"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by submitting your first contract."})]})]})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 overflow-y-auto z-50",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:[o.status==="approved"||o.status==="rejected"?"Edit Evaluation":"Evaluate Contract",": ",o.title]}),o.status==="approved"||o.status==="rejected"?e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b(o.status)}`,children:o.status.replace("_"," ")}):null]}),o.evaluationScore&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-md",children:[e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Current Score:"})," ",o.evaluationScore,"/100"]}),o.reviewerFeedback&&e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:[e.jsx("strong",{children:"Current Feedback:"})," ",o.reviewerFeedback]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Evaluation Score (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",defaultValue:o.evaluationScore||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter score",id:"scoreInput"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reviewer Feedback"}),e.jsx("textarea",{rows:"4",defaultValue:o.reviewerFeedback||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Provide legal feedback and suggestions...",id:"feedbackInput"})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-3 sm:gap-3 sm:grid-flow-row-dense",children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:text-sm",onClick:()=>{const t=parseInt(document.getElementById("scoreInput").value)||0,x=document.getElementById("feedbackInput").value;y(o.id,t,x,"approved")},children:o.status==="approved"?"Update Approval":"Approve"}),e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:()=>{const t=parseInt(document.getElementById("scoreInput").value)||0,x=document.getElementById("feedbackInput").value;y(o.id,t,x,"rejected")},children:o.status==="rejected"?"Update Rejection":"Reject"}),e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm",onClick:()=>u(null),children:"Cancel"})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 overflow-y-auto z-50",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["AI Legal Review: ",n.title]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j(n.aiScore)} bg-opacity-20`,children:["AI Score: ",n.aiScore,"/100"]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${w(n.aiRiskLevel)}`,children:["Risk: ",n.aiRiskLevel]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"AI Legal Feedback"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700 leading-relaxed",children:n.aiFeedback||"No AI legal feedback available for this contract."})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-2",children:"Contract Details"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:e.jsx("strong",{children:"Department:"})}),e.jsx("span",{children:n.department})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:e.jsx("strong",{children:"Submitted by:"})}),e.jsx("span",{children:n.submittedBy})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:e.jsx("strong",{children:"Date:"})}),e.jsx("span",{children:n.submittedDate})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:e.jsx("strong",{children:"Status:"})}),e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b(n.status)}`,children:n.status.replace("_"," ")})]}),n.evaluationScore&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:e.jsx("strong",{children:"Human Score:"})}),e.jsxs("span",{className:"text-green-600",children:[n.evaluationScore,"/100"]})]})]})]})]}),e.jsx("div",{className:"mt-5 sm:mt-6",children:e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm",onClick:()=>v(null),children:"Close"})})]})]})})]})},ye=()=>{const{setUserContext:i}=T(),[p,o]=h.useState({email:"",password:"",rememberMe:!1}),[u,d]=h.useState(!1),[g,c]=h.useState(""),a={"manager@company.com":{password:"password123",userContext:{user_id:"EMP001",department:"Legal",role:"Manager",location:"North America",language:"en"}},"lawyer@company.com":{password:"password123",userContext:{user_id:"EMP002",department:"Legal",role:"Lawyer",location:"Europe",language:"en"}},"director@company.com":{password:"password123",userContext:{user_id:"EMP003",department:"Business",role:"Director",location:"Asia Pacific",language:"en"}}},n=async b=>{b.preventDefault(),d(!0),c(""),await new Promise(w=>setTimeout(w,1e3));const j=a[p.email];j&&j.password===p.password?(i(j.userContext),localStorage.setItem("user_context",JSON.stringify(j.userContext))):c("Invalid email or password. Try: manager@company.com / password123"),d(!1)},v=b=>{const{name:j,value:w,type:t,checked:x}=b.target;o(s=>({...s,[j]:t==="checkbox"?x:w}))},y=b=>{o({email:b,password:"password123",rememberMe:!1})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to Contract Generation Platform"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Demo Login - This will be replaced with SSO integration"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:g}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:p.email,onChange:v,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your company email"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:p.password,onChange:v,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter password"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:p.rememberMe,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Quick Demo Logins"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[e.jsx("button",{onClick:()=>y("manager@company.com"),className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Login as Manager"}),e.jsx("button",{onClick:()=>y("lawyer@company.com"),className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Login as Lawyer"}),e.jsx("button",{onClick:()=>y("director@company.com"),className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Login as Director"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"SSO Integration Ready"}),e.jsx("p",{className:"text-xs text-blue-700",children:"This login page is designed to be easily replaced with your company's SSO provider. The user context system is already built and ready for auto-population."})]})]})})]})};function we(){const{initialChatStep:i,userContext:p,setUserContext:o}=T(),[u,d]=h.useState("contract-submission"),[g,c]=h.useState(!1);h.useEffect(()=>{const y=localStorage.getItem("user_context");if(y){const b=JSON.parse(y);o(b),c(!0)}},[o]),h.useEffect(()=>{c(!!p)},[p]);const a=()=>{o(null),localStorage.removeItem("user_context"),c(!1)};if(!g)return e.jsx(ye,{});const n=()=>e.jsx("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Contract Generation Platform"})}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"hidden sm:flex sm:space-x-4",children:[e.jsx("button",{onClick:()=>d("contract-submission"),className:`${u==="contract-submission"?"text-blue-600 border-blue-500":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"} inline-flex items-center px-3 py-2 border-b-2 text-sm font-medium`,children:"Submit Contract"}),e.jsx("button",{onClick:()=>d("contract-catalog"),className:`${u==="contract-catalog"?"text-blue-600 border-blue-500":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"} inline-flex items-center px-3 py-2 border-b-2 text-sm font-medium`,children:"Contract Catalog"}),e.jsx("button",{onClick:()=>d("contract-reviewer"),className:`${u==="contract-reviewer"?"text-blue-600 border-blue-500":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"} inline-flex items-center px-3 py-2 border-b-2 text-sm font-medium`,children:"Contract Reviewer"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:p==null?void 0:p.role}),e.jsx("span",{className:"mx-1",children:"â€¢"}),e.jsx("span",{children:p==null?void 0:p.department})]}),e.jsx("button",{onClick:a,className:"text-sm text-gray-500 hover:text-gray-700 px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50",children:"Logout"})]})]})]})})}),v=()=>{switch(u){case"contract-submission":return i!=="done"?e.jsx(X,{}):e.jsx(te,{});case"contract-catalog":return e.jsx(ve,{});case"contract-reviewer":return e.jsx(je,{});default:return i!=="done"?e.jsx(X,{}):e.jsx(te,{})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(n,{}),e.jsx("main",{children:v()})]})}function Ne(){return e.jsx(me,{children:e.jsx(we,{})})}re(document.getElementById("root")).render(e.jsx(Ne,{}));export{ne as _};
